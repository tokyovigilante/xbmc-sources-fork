<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<title>Analyser</title>
<meta name="generator" content="DocBook XSL Stylesheets V1.65.1">
<link rel="home" href="index.html" title="Enca Library Reference Manual">
<link rel="up" href="ch01.html" title="Enca Library API">
<link rel="previous" href="ch01.html" title="Enca Library API">
<link rel="next" href="libenca-Typedefs-and-Constants.html" title="Typedefs and Constants">
<meta name="generator" content="GTK-Doc V1.4 (XML mode)">
<link rel="stylesheet" href="style.css" type="text/css">
<link rel="chapter" href="ch01.html" title="Enca Library API">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table class="navigation" width="100%" summary="Navigation header" cellpadding="2" cellspacing="2"><tr valign="middle">
<td><a accesskey="p" href="ch01.html"><img src="left.png" width="24" height="24" border="0" alt="Prev"></a></td>
<td><a accesskey="u" href="ch01.html"><img src="up.png" width="24" height="24" border="0" alt="Up"></a></td>
<td><a accesskey="h" href="index.html"><img src="home.png" width="24" height="24" border="0" alt="Home"></a></td>
<th width="100%" align="center">Enca Library Reference Manual</th>
<td><a accesskey="n" href="libenca-Typedefs-and-Constants.html"><img src="right.png" width="24" height="24" border="0" alt="Next"></a></td>
</tr></table>
<div class="refentry" lang="en">
<a name="libenca-Analyser"></a><div class="titlepage">
<div></div>
<div></div>
</div>
<div class="refnamediv"><table width="100%"><tr>
<td valign="top">
<h2><span class="refentrytitle">Analyser</span></h2>
<p>Analyser &#8212; 
Basic analyser interface.</p>
</td>
<td valign="top" align="right"></td>
</tr></table></div>
<div class="refsynopsisdiv">
<h2>Synopsis</h2>
<pre class="synopsis">



EncaAnalyser <a href="libenca-Analyser.html#enca-analyser-alloc">enca_analyser_alloc</a>            (const char *langname);
void        <a href="libenca-Analyser.html#enca-analyser-free">enca_analyser_free</a>              (EncaAnalyser analyser);
<a href="libenca-Typedefs-and-Constants.html#EncaEncoding">EncaEncoding</a> <a href="libenca-Analyser.html#enca-analyse">enca_analyse</a>                   (EncaAnalyser analyser,
                                             unsigned char *buffer,
                                             size_t size);
<a href="libenca-Typedefs-and-Constants.html#EncaEncoding">EncaEncoding</a> <a href="libenca-Analyser.html#enca-analyse-const">enca_analyse_const</a>             (EncaAnalyser analyser,
                                             unsigned char *buffer,
                                             size_t size);
int         <a href="libenca-Analyser.html#enca-errno">enca_errno</a>                      (EncaAnalyser analyser);
const char* <a href="libenca-Analyser.html#enca-strerror">enca_strerror</a>                   (EncaAnalyser analyser,
                                             int errnum);
int         <a href="libenca-Analyser.html#enca-double-utf8-check">enca_double_utf8_check</a>          (EncaAnalyser analyser,
                                             unsigned char *buffer,
                                             size_t size);
int*        <a href="libenca-Analyser.html#enca-double-utf8-get-candidates">enca_double_utf8_get_candidates</a> (EncaAnalyser analyser);
void        <a href="libenca-Analyser.html#enca-set-multibyte">enca_set_multibyte</a>              (EncaAnalyser analyser,
                                             int multibyte);
int         <a href="libenca-Analyser.html#enca-get-multibyte">enca_get_multibyte</a>              (EncaAnalyser analyser);
void        <a href="libenca-Analyser.html#enca-set-interpreted-surfaces">enca_set_interpreted_surfaces</a>   (EncaAnalyser analyser,
                                             int interpreted_surfaces);
int         <a href="libenca-Analyser.html#enca-get-interpreted-surfaces">enca_get_interpreted_surfaces</a>   (EncaAnalyser analyser);
void        <a href="libenca-Analyser.html#enca-set-ambiguity">enca_set_ambiguity</a>              (EncaAnalyser analyser,
                                             int ambiguity);
int         <a href="libenca-Analyser.html#enca-get-ambiguity">enca_get_ambiguity</a>              (EncaAnalyser analyser);
void        <a href="libenca-Analyser.html#enca-set-filtering">enca_set_filtering</a>              (EncaAnalyser analyser,
                                             int filtering);
int         <a href="libenca-Analyser.html#enca-get-filtering">enca_get_filtering</a>              (EncaAnalyser analyser);
void        <a href="libenca-Analyser.html#enca-set-garbage-test">enca_set_garbage_test</a>           (EncaAnalyser analyser,
                                             int garabage_test);
int         <a href="libenca-Analyser.html#enca-get-garbage-test">enca_get_garbage_test</a>           (EncaAnalyser analyser);
void        <a href="libenca-Analyser.html#enca-set-termination-strictness">enca_set_termination_strictness</a> (EncaAnalyser analyser,
                                             int termination_strictness);
int         <a href="libenca-Analyser.html#enca-get-termination-strictness">enca_get_termination_strictness</a> (EncaAnalyser analyser);
int         <a href="libenca-Analyser.html#enca-set-significant">enca_set_significant</a>            (EncaAnalyser analyser,
                                             size_t significant);
size_t      <a href="libenca-Analyser.html#enca-get-significant">enca_get_significant</a>            (EncaAnalyser analyser);
int         <a href="libenca-Analyser.html#enca-set-threshold">enca_set_threshold</a>              (EncaAnalyser analyser,
                                             double threshold);
double      <a href="libenca-Analyser.html#enca-get-threshold">enca_get_threshold</a>              (EncaAnalyser analyser);
</pre>
</div>
<div class="refsect1" lang="en">
<a name="id2849786"></a><h2>Description</h2>
<p>
Basically you want to allocate an analyser with <a href="libenca-Analyser.html#enca-analyser-alloc"><tt class="function">enca_analyser_alloc()</tt></a> for some
language, use <a href="libenca-Analyser.html#enca-analyse"><tt class="function">enca_analyse()</tt></a> (or <a href="libenca-Analyser.html#enca-analyse-const"><tt class="function">enca_analyse_const()</tt></a>) on a buffer to find its
encoding, and interpret the results with something like <a href="libenca-Charsets-and-Surfaces.html#enca-charset-name"><tt class="function">enca_charset_name()</tt></a>.
The analyser then can be used for another buffer. Once you no longer need
it, call <a href="libenca-Analyser.html#enca-analyser-free"><tt class="function">enca_analyser_free()</tt></a> to release it.
</p>
<p>
A single working example is better than a hundred pages of reference manual.
</p>
<div class="example">
<a name="id2849835"></a><p class="title"><b>Example&#160;1.&#160;A minimal Enca library application &#8211; Czech encoding
detector.</b></p>
<pre class="programlisting">
<span class="type">include</span> &lt;stdio.h&gt;
<span class="type">include</span> &lt;enca.h&gt;

int
main(void)
{
  EncaAnalyser analyser;
  EncaEncoding encoding;
  unsigned char buffer[4096];
  size_t buflen;

  buflen = fread(buffer, 1, 4096, stdin);
  analyser = enca_analyser_alloc("cs");
  encoding = enca_analyse(analyser, buffer, buflen);
  printf("Charset: %<tt class="literal">s</tt>\n", enca_charset_name(encoding.charset,
                                             ENCA_NAME_STYLE_HUMAN));
  enca_analyser_free(analyser);

  return 0;
}
</pre>
</div>
<p>
The analyser has plenty of options, but generally you don't need to fiddle
with them, except <a href="libenca-Analyser.html#enca-set-termination-strictness"><tt class="function">enca_set_termination_strictness()</tt></a>.
</p>
<p>
All names prefixed with <tt class="function">ENCA_</tt>,
<tt class="function">Enca</tt>, <tt class="function">_Enca</tt>,
or <tt class="function">enca_</tt> should be treated as reserved and not used for
application function/variable/type/macro names.
</p>
</div>
<div class="refsect1" lang="en">
<a name="id2849899"></a><h2>Details</h2>
<div class="refsect2" lang="en">
<a name="id2849904"></a><h3>
<a name="enca-analyser-alloc"></a>enca_analyser_alloc ()</h3>
<a class="indexterm" name="id2769013"></a><pre class="programlisting">EncaAnalyser enca_analyser_alloc            (const char *langname);</pre>
<p>
Allocates an analyser and initializes it for language <i class="parameter"><tt>language</tt></i>.
</p>
<p>
The analyser, once crerated, can be used only for language for which it
was initialized.  If you need to detect encodings of texts in more than one
language, you must allocate an analyser for each one.  Note however, an
analyser may occupy a considerable amount of memory (a few hundreds of kB),
so it's generally not a good idea to have several hundreds of them floating
around.
</p>
<p>
<i class="parameter"><tt>langname</tt></i> is two-letter ISO 639:1989 language code.  Locale names in form
language_territory and ISO-639 English language names also may be accepted
in the future. To be on the safe side, use only names returned by
<a href="libenca-Auxiliary-Functions.html#enca-get-languages"><tt class="function">enca_get_languages()</tt></a>.</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td>
<span class="term"><i class="parameter"><tt>langname</tt></i>&#160;:</span></td>
<td> Language for which the analyser should be initialized.
</td>
</tr>
<tr>
<td>
<span class="term"><span class="emphasis"><em>Returns</em></span>&#160;:</span></td>
<td> The newly created <span class="type">EncaAnalyser</span> on success, <a
href="/usr/share/gtk-doc/html/glib/glib-Standard-Macros.html#NULL:CAPS"
><span class="type">NULL</span></a> on failure
         (namely when <i class="parameter"><tt>langname</tt></i> is unknown or otherwise invalid).
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2769107"></a><h3>
<a name="enca-analyser-free"></a>enca_analyser_free ()</h3>
<a class="indexterm" name="id2769115"></a><pre class="programlisting">void        enca_analyser_free              (EncaAnalyser analyser);</pre>
<p>
Frees memory used by <span class="type">EncaAnalyser</span> <i class="parameter"><tt>analyser</tt></i>.</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody><tr>
<td>
<span class="term"><i class="parameter"><tt>analyser</tt></i>&#160;:</span></td>
<td> An analyser to be destroyed.
</td>
</tr></tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2769161"></a><h3>
<a name="enca-analyse"></a>enca_analyse ()</h3>
<a class="indexterm" name="id2769170"></a><pre class="programlisting"><a href="libenca-Typedefs-and-Constants.html#EncaEncoding">EncaEncoding</a> enca_analyse                   (EncaAnalyser analyser,
                                             unsigned char *buffer,
                                             size_t size);</pre>
<p>
Analyses <i class="parameter"><tt>buffer</tt></i> and finds its encoding.
</p>
<p>
The <i class="parameter"><tt>buffer</tt></i> is checked for 8bit encodings of language for which <i class="parameter"><tt>analyser</tt></i>
was initialized and for multibyte encodings, mostly independent on language
(unless disabled with <a href="libenca-Analyser.html#enca-set-multibyte"><tt class="function">enca_set_multibyte()</tt></a>).
</p>
<p>
The contents of <i class="parameter"><tt>buffer</tt></i> may be (and probably will be) modified during the
analyse.  Use <a href="libenca-Analyser.html#enca-analyse-const"><tt class="function">enca_analyse_const()</tt></a> instead if this discomforts you.</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td>
<span class="term"><i class="parameter"><tt>analyser</tt></i>&#160;:</span></td>
<td> An analyser initialized for some language.
</td>
</tr>
<tr>
<td>
<span class="term"><i class="parameter"><tt>buffer</tt></i>&#160;:</span></td>
<td> Buffer to be analysed.
</td>
</tr>
<tr>
<td>
<span class="term"><i class="parameter"><tt>size</tt></i>&#160;:</span></td>
<td> Size of <i class="parameter"><tt>buffer</tt></i>.
</td>
</tr>
<tr>
<td>
<span class="term"><span class="emphasis"><em>Returns</em></span>&#160;:</span></td>
<td> Encoding of <i class="parameter"><tt>buffer</tt></i>.  When charset part of return value is
         <a href="libenca-Typedefs-and-Constants.html#ENCA-CS-UNKNOWN:CAPS"><span class="type">ENCA_CS_UNKNOWN</span></a>, encoding was not determined.  Check
         <a href="libenca-Analyser.html#enca-errno"><tt class="function">enca_errno()</tt></a> for reason.
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2882555"></a><h3>
<a name="enca-analyse-const"></a>enca_analyse_const ()</h3>
<a class="indexterm" name="id2882564"></a><pre class="programlisting"><a href="libenca-Typedefs-and-Constants.html#EncaEncoding">EncaEncoding</a> enca_analyse_const             (EncaAnalyser analyser,
                                             unsigned char *buffer,
                                             size_t size);</pre>
<p>
Analyses <i class="parameter"><tt>buffer</tt></i> and finds its encoding.
</p>
<p>
The <i class="parameter"><tt>buffer</tt></i> is checked for 8bit encodings of language for which <i class="parameter"><tt>analyser</tt></i>
was initialized and for multibyte encodings, mostly independent on language
(unless disabled with <a href="libenca-Analyser.html#enca-set-multibyte"><tt class="function">enca_set_multibyte()</tt></a>).
</p>
<p>
This function never modifies <i class="parameter"><tt>buffer</tt></i> (can be even used with string literal
<i class="parameter"><tt>buffer</tt></i>) at the expense it's generally slower than <a href="libenca-Analyser.html#enca-analyse"><tt class="function">enca_analyse()</tt></a>.</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td>
<span class="term"><i class="parameter"><tt>analyser</tt></i>&#160;:</span></td>
<td> An analyser initialized for some language.
</td>
</tr>
<tr>
<td>
<span class="term"><i class="parameter"><tt>buffer</tt></i>&#160;:</span></td>
<td> Buffer to be analysed.
</td>
</tr>
<tr>
<td>
<span class="term"><i class="parameter"><tt>size</tt></i>&#160;:</span></td>
<td> Size of <i class="parameter"><tt>buffer</tt></i>.
</td>
</tr>
<tr>
<td>
<span class="term"><span class="emphasis"><em>Returns</em></span>&#160;:</span></td>
<td> Encoding of <i class="parameter"><tt>buffer</tt></i>.  When charset part of return value is
         <a href="libenca-Typedefs-and-Constants.html#ENCA-CS-UNKNOWN:CAPS"><span class="type">ENCA_CS_UNKNOWN</span></a>, encoding was not determined.  Check
         <a href="libenca-Analyser.html#enca-errno"><tt class="function">enca_errno()</tt></a> for reason.
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2882704"></a><h3>
<a name="enca-errno"></a>enca_errno ()</h3>
<a class="indexterm" name="id2882713"></a><pre class="programlisting">int         enca_errno                      (EncaAnalyser analyser);</pre>
<p>
Returns analyser error code.
</p>
<p>
The error code is not modified.  However, any other analyser call i.e.
call to a function taking <i class="parameter"><tt>analyser</tt></i> as parameter can change the error code.</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td>
<span class="term"><i class="parameter"><tt>analyser</tt></i>&#160;:</span></td>
<td> An analyser.
</td>
</tr>
<tr>
<td>
<span class="term"><span class="emphasis"><em>Returns</em></span>&#160;:</span></td>
<td> Error code of reason why last analyser call failed.
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2882769"></a><h3>
<a name="enca-strerror"></a>enca_strerror ()</h3>
<a class="indexterm" name="id2882777"></a><pre class="programlisting">const char* enca_strerror                   (EncaAnalyser analyser,
                                             int errnum);</pre>
<p>
Returns string describing the error code.
</p>
<p>
The returned string must be considered constant and must NOT be freed.
It is however gauranteed not to be modified on invalidated by subsequent
calls to any libenca functions, including <a href="libenca-Analyser.html#enca-strerror"><tt class="function">enca_strerror()</tt></a>.
</p>
<p>
The analyser error code is not changed for a successful call, and it set
to <span class="type">ENCA_EINVALUE</span> upon error.</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td>
<span class="term"><i class="parameter"><tt>analyser</tt></i>&#160;:</span></td>
<td> An analyser.
</td>
</tr>
<tr>
<td>
<span class="term"><i class="parameter"><tt>errnum</tt></i>&#160;:</span></td>
<td> An analyser error code.
</td>
</tr>
<tr>
<td>
<span class="term"><span class="emphasis"><em>Returns</em></span>&#160;:</span></td>
<td> String describing the error code.
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2882866"></a><h3>
<a name="enca-double-utf8-check"></a>enca_double_utf8_check ()</h3>
<a class="indexterm" name="id2882874"></a><pre class="programlisting">int         enca_double_utf8_check          (EncaAnalyser analyser,
                                             unsigned char *buffer,
                                             size_t size);</pre>
<p>
Checks buffer for double-UTF-8 encoding.
</p>
<p>
Double-UTF-8 encoding is the result of [errorneous] conversion of UTF-8 text
to UTF-8 again, as if it was in some 8bit charset.  This is quite hard to
recover from.
</p>
<p>
The analayser mostly only determines what language will be assumed,
the rest of this test is independent on the main guessing routines.
When <i class="parameter"><tt>buffer</tt></i> doesn't containing UTF-8 text, the result is undefined
(namely, false positives are possible).
</p>
<p>
Calling this function when language is `none' has currently no effect.</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td>
<span class="term"><i class="parameter"><tt>analyser</tt></i>&#160;:</span></td>
<td> Analyzer state determinig the language for double-UTF-8 check.
</td>
</tr>
<tr>
<td>
<span class="term"><i class="parameter"><tt>buffer</tt></i>&#160;:</span></td>
<td> The buffer to be checked [<i class="parameter"><tt>size</tt></i>].
</td>
</tr>
<tr>
<td>
<span class="term"><i class="parameter"><tt>size</tt></i>&#160;:</span></td>
<td> The size of <i class="parameter"><tt>buffer</tt></i>.
</td>
</tr>
<tr>
<td>
<span class="term"><span class="emphasis"><em>Returns</em></span>&#160;:</span></td>
<td> Nonzero, when <i class="parameter"><tt>buffer</tt></i> probably contains doubly-UTF-8 encoded text.
         More precisely, it returns the number of charsets which are
         possible candidates for source charset.  You can then use
         <a href="libenca-Analyser.html#enca-double-utf8-get-candidates"><tt class="function">enca_double_utf8_get_candidates()</tt></a> to retrieve the charsets.
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2883000"></a><h3>
<a name="enca-double-utf8-get-candidates"></a>enca_double_utf8_get_candidates ()</h3>
<a class="indexterm" name="id2883011"></a><pre class="programlisting">int*        enca_double_utf8_get_candidates (EncaAnalyser analyser);</pre>
<p>
Returns array of double-UTF-8 source charset candidates from the last check.
</p>
<p>
The returned array should be freed by caller then no longer needed. Its
is the return value of the preceding <a href="libenca-Analyser.html#enca-double-utf8-check"><tt class="function">enca_double_utf8_check()</tt></a> call.
</p>
<p>
When called before any double-UTF-8 test has been performed yet or after
and unsuccessfull double-UTF-8 test, it returns NULL, but the result after
an unsuccessfull check should be considered undefined.</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td>
<span class="term"><i class="parameter"><tt>analyser</tt></i>&#160;:</span></td>
<td> Analyzer state for which double-UTF-8 candidates are to be
           returned.
</td>
</tr>
<tr>
<td>
<span class="term"><span class="emphasis"><em>Returns</em></span>&#160;:</span></td>
<td> An array containing charset id's of possible source charsets from
         which the sample was doubly-UTF-8 encoded.  The array may contain
         only one value, but usually enca is not able to decide between
         e.g. ISO-8859-2 and Win1250, thus more candidates are returned.
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2883085"></a><h3>
<a name="enca-set-multibyte"></a>enca_set_multibyte ()</h3>
<a class="indexterm" name="id2883093"></a><pre class="programlisting">void        enca_set_multibyte              (EncaAnalyser analyser,
                                             int multibyte);</pre>
<p>
Enables or disables multibyte encoding tests for <i class="parameter"><tt>analyser</tt></i>.
</p>
<p>
This option is enabled by default.
</p>
<p>
When multibyte encodings are disabled, only 8bit charsets are checked.
Disabling them for language with no 8bit charsets leaves only one thing
<a href="libenca-Analyser.html#enca-analyse"><tt class="function">enca_analyse()</tt></a> could test: whether the sample is purely 7bit ASCII or not
(the latter leading to analyser failure, of course).
</p>
<p>
Multibyte encoding detection is also affected by
<a href="libenca-Analyser.html#enca-set-termination-strictness"><tt class="function">enca_set_termination_strictness()</tt></a>.</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td>
<span class="term"><i class="parameter"><tt>analyser</tt></i>&#160;:</span></td>
<td> An analyser.
</td>
</tr>
<tr>
<td>
<span class="term"><i class="parameter"><tt>multibyte</tt></i>&#160;:</span></td>
<td> Whether multibyte encoding tests should be enabled (nonzero to
            enable, zero to disable).
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2883183"></a><h3>
<a name="enca-get-multibyte"></a>enca_get_multibyte ()</h3>
<a class="indexterm" name="id2883192"></a><pre class="programlisting">int         enca_get_multibyte              (EncaAnalyser analyser);</pre>
<p>
Returns whether <i class="parameter"><tt>analyser</tt></i> can return multibyte encodings.
</p>
<p>
See <a href="libenca-Analyser.html#enca-set-multibyte"><tt class="function">enca_set_multibyte()</tt></a> for more detailed description of multibyte
encoding checking.</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td>
<span class="term"><i class="parameter"><tt>analyser</tt></i>&#160;:</span></td>
<td> An analyser.
</td>
</tr>
<tr>
<td>
<span class="term"><span class="emphasis"><em>Returns</em></span>&#160;:</span></td>
<td> Nonzero when multibyte encoding are possible, zero otherwise.

</td>
</tr>
</tbody>
</table></div>
<p>Since  1.3.
</p>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2883259"></a><h3>
<a name="enca-set-interpreted-surfaces"></a>enca_set_interpreted_surfaces ()</h3>
<a class="indexterm" name="id2883270"></a><pre class="programlisting">void        enca_set_interpreted_surfaces   (EncaAnalyser analyser,
                                             int interpreted_surfaces);</pre>
<p>
Enables or disables interpeted surfaces tests for <i class="parameter"><tt>analyser</tt></i>.
</p>
<p>
This option is enabled by default.
</p>
<p>
To allow simple applications which care about charset only and don't want
to wrestle with surfaces, neglecting surface information should not have
serious consequences.  While ignoring EOL type surface is feasible, and
ignoring UCS byteorders may be acceptable in endian-homogenous environment;
ignoring the fact file is Quoted-Printable encoded can have disasterous
consequences.  By disabling this option you can disable surfaces requiring
fundamental reinterpretation of the content, namely <tt class="literal">ENCA_SURFACE_QP</tt>
and <tt class="literal">ENCA_SURFACE_EOL_BIN</tt> (thus probably making <a href="libenca-Analyser.html#enca-analyse"><tt class="function">enca_analyse()</tt></a> to fail on
such samples).</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td>
<span class="term"><i class="parameter"><tt>analyser</tt></i>&#160;:</span></td>
<td> An analyser.
</td>
</tr>
<tr>
<td>
<span class="term"><i class="parameter"><tt>interpreted_surfaces</tt></i>&#160;:</span></td>
<td> Whether interpreted surfaces tests should be enabled
                       (nonzero to allow, zero to disallow).
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2844868"></a><h3>
<a name="enca-get-interpreted-surfaces"></a>enca_get_interpreted_surfaces ()</h3>
<a class="indexterm" name="id2869542"></a><pre class="programlisting">int         enca_get_interpreted_surfaces   (EncaAnalyser analyser);</pre>
<p>
Returns whether <i class="parameter"><tt>analyser</tt></i> allows interpreted surfaces.
</p>
<p>
See <a href="libenca-Analyser.html#enca-set-interpreted-surfaces"><tt class="function">enca_set_interpreted_surfaces()</tt></a> for more detailed description of
interpreted surfaces.</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td>
<span class="term"><i class="parameter"><tt>analyser</tt></i>&#160;:</span></td>
<td> An analyser.
</td>
</tr>
<tr>
<td>
<span class="term"><span class="emphasis"><em>Returns</em></span>&#160;:</span></td>
<td> Nonzero when interpreted surfaces are possible, zero otherwise.

</td>
</tr>
</tbody>
</table></div>
<p>Since  1.3.
</p>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2860861"></a><h3>
<a name="enca-set-ambiguity"></a>enca_set_ambiguity ()</h3>
<a class="indexterm" name="id2858475"></a><pre class="programlisting">void        enca_set_ambiguity              (EncaAnalyser analyser,
                                             int ambiguity);</pre>
<p>
Enables or disables ambiguous mode for <i class="parameter"><tt>analyser</tt></i>.
</p>
<p>
This option is disabled by default.
</p>
<p>
In ambiguous mode some result is returned even when the charset cannot be
determined uniquely, provided that sample contains only characters which
have the same meaning in all charsets under consideration.</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td>
<span class="term"><i class="parameter"><tt>analyser</tt></i>&#160;:</span></td>
<td> An analyser.
</td>
</tr>
<tr>
<td>
<span class="term"><i class="parameter"><tt>ambiguity</tt></i>&#160;:</span></td>
<td> Whether result can be ambiguous (nonzero to allow, zero to
            disallow).
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2883377"></a><h3>
<a name="enca-get-ambiguity"></a>enca_get_ambiguity ()</h3>
<a class="indexterm" name="id2883384"></a><pre class="programlisting">int         enca_get_ambiguity              (EncaAnalyser analyser);</pre>
<p>
Returns whether <i class="parameter"><tt>analyser</tt></i> can return ambiguous results.
</p>
<p>
See <a href="libenca-Analyser.html#enca-set-ambiguity"><tt class="function">enca_set_ambiguity()</tt></a> for more detailed description of ambiguous results.</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td>
<span class="term"><i class="parameter"><tt>analyser</tt></i>&#160;:</span></td>
<td> An analyser.
</td>
</tr>
<tr>
<td>
<span class="term"><span class="emphasis"><em>Returns</em></span>&#160;:</span></td>
<td> Nonzero when ambiguous results are allowed, zero otherwise.

</td>
</tr>
</tbody>
</table></div>
<p>Since  1.3.
</p>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2883445"></a><h3>
<a name="enca-set-filtering"></a>enca_set_filtering ()</h3>
<a class="indexterm" name="id2883454"></a><pre class="programlisting">void        enca_set_filtering              (EncaAnalyser analyser,
                                             int filtering);</pre>
<p>
Enables or disables filters for <i class="parameter"><tt>analyser</tt></i>.
</p>
<p>
This option is enabled by default.
</p>
<p>
Various filters are used to filter out block of binary noise and box-drawing
characters that could otherwise confuse enca.  In cases this is unwanted,
you can disable them by setting this option to zero.</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td>
<span class="term"><i class="parameter"><tt>analyser</tt></i>&#160;:</span></td>
<td> An analyser.
</td>
</tr>
<tr>
<td>
<span class="term"><i class="parameter"><tt>filtering</tt></i>&#160;:</span></td>
<td> Whether filters should be enabled (nonzero to enable, zero to
            disable).
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2883522"></a><h3>
<a name="enca-get-filtering"></a>enca_get_filtering ()</h3>
<a class="indexterm" name="id2883531"></a><pre class="programlisting">int         enca_get_filtering              (EncaAnalyser analyser);</pre>
<p>
Returns whether <i class="parameter"><tt>analyser</tt></i> has filtering enabled.
</p>
<p>
See <a href="libenca-Analyser.html#enca-set-filtering"><tt class="function">enca_set_filtering()</tt></a> for more detailed description of filtering.</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td>
<span class="term"><i class="parameter"><tt>analyser</tt></i>&#160;:</span></td>
<td> An analyser.
</td>
</tr>
<tr>
<td>
<span class="term"><span class="emphasis"><em>Returns</em></span>&#160;:</span></td>
<td> Nonzero when filtering is enabled, zero otherwise.

</td>
</tr>
</tbody>
</table></div>
<p>Since  1.3.
</p>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2883596"></a><h3>
<a name="enca-set-garbage-test"></a>enca_set_garbage_test ()</h3>
<a class="indexterm" name="id2883605"></a><pre class="programlisting">void        enca_set_garbage_test           (EncaAnalyser analyser,
                                             int garabage_test);</pre>
<p>
Enables or disables garbage test for <i class="parameter"><tt>analyser</tt></i>.
</p>
<p>
This option is enabled by default.
</p>
<p>
To prevent white noise (and almost-white noise) from being accidentally
detected as some charset, a garbage test is used.  In cases this is
unwanted, you can disable is by setting this option to zero.</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td>
<span class="term"><i class="parameter"><tt>analyser</tt></i>&#160;:</span></td>
<td> An analyser.
</td>
</tr>
<tr>
<td>
<span class="term"><i class="parameter"><tt>garabage_test</tt></i>&#160;:</span></td>
<td> Whether garbage test should be allowed (nonzero to enable,
                nzero to disable).
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2883673"></a><h3>
<a name="enca-get-garbage-test"></a>enca_get_garbage_test ()</h3>
<a class="indexterm" name="id2883682"></a><pre class="programlisting">int         enca_get_garbage_test           (EncaAnalyser analyser);</pre>
<p>
Returns whether <i class="parameter"><tt>analyser</tt></i> has garbage test enabled.
</p>
<p>
See <a href="libenca-Analyser.html#enca-set-garbage-test"><tt class="function">enca_set_garbage_test()</tt></a> for more detailed description of garbage test.</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td>
<span class="term"><i class="parameter"><tt>analyser</tt></i>&#160;:</span></td>
<td> An analyser.
</td>
</tr>
<tr>
<td>
<span class="term"><span class="emphasis"><em>Returns</em></span>&#160;:</span></td>
<td> Nonzero when garbage test is enabled, zero otherwise.

</td>
</tr>
</tbody>
</table></div>
<p>Since  1.3.
</p>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2883747"></a><h3>
<a name="enca-set-termination-strictness"></a>enca_set_termination_strictness ()</h3>
<a class="indexterm" name="id2883755"></a><pre class="programlisting">void        enca_set_termination_strictness (EncaAnalyser analyser,
                                             int termination_strictness);</pre>
<p>
Enables or disables requiring multibyte sequences to be terminated correctly
at the end of sample.
</p>
<p>
This option is enabled by default.
</p>
<p>
The sample given to <a href="libenca-Analyser.html#enca-analyse"><tt class="function">enca_analyse()</tt></a> generally may not be a complete text
(e.g. for efficiency reasons).  As a result, it may end in the middle of a
multibyte sequence.  In this case, you should disable this option to
prevent rejecting some charset just because the sample don't terminate
correctly.  On the other hand, when given sample contains whole text, you
should always enable this option to assure correctness of the result.
</p>
<p>
Note this option does NOT affect fixed character size encodings, like UCS-2
and UCS-4; sample is never assumed to contain UCS-2 text when its size is
not even (and similarly for UCS-4).</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td>
<span class="term"><i class="parameter"><tt>analyser</tt></i>&#160;:</span></td>
<td> An analyser.
</td>
</tr>
<tr>
<td>
<span class="term"><i class="parameter"><tt>termination_strictness</tt></i>&#160;:</span></td>
<td> Whether multibyte sequences are required to be
                         terminated correctly at the end of sample
                         (nonzero to require, zero to relax).
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2883840"></a><h3>
<a name="enca-get-termination-strictness"></a>enca_get_termination_strictness ()</h3>
<a class="indexterm" name="id2883848"></a><pre class="programlisting">int         enca_get_termination_strictness (EncaAnalyser analyser);</pre>
<p>
Returns whether <i class="parameter"><tt>analyser</tt></i> requires strict termination.
</p>
<p>
See <a href="libenca-Analyser.html#enca-set-termination-strictness"><tt class="function">enca_set_termination_strictness()</tt></a> for more detailed description of
termination strictness.</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td>
<span class="term"><i class="parameter"><tt>analyser</tt></i>&#160;:</span></td>
<td> An analyser.
</td>
</tr>
<tr>
<td>
<span class="term"><span class="emphasis"><em>Returns</em></span>&#160;:</span></td>
<td> Nonzero when strict termination is required, zero otherwise.

</td>
</tr>
</tbody>
</table></div>
<p>Since  1.3.
</p>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2883914"></a><h3>
<a name="enca-set-significant"></a>enca_set_significant ()</h3>
<a class="indexterm" name="id2883922"></a><pre class="programlisting">int         enca_set_significant            (EncaAnalyser analyser,
                                             size_t significant);</pre>
<p>
Sets the minimal number of required significant characters.
</p>
<p>
The default value of this option is 10.
</p>
<p>
<a href="libenca-Analyser.html#enca-analyse"><tt class="function">enca_analyse()</tt></a> refuses to make a decision unles at least this number
of significant characters is found in sample.  You may want to lower this
number for very short texts.</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td>
<span class="term"><i class="parameter"><tt>analyser</tt></i>&#160;:</span></td>
<td> An analyser.
</td>
</tr>
<tr>
<td>
<span class="term"><i class="parameter"><tt>significant</tt></i>&#160;:</span></td>
<td> Minimal number of required significant characters.
</td>
</tr>
<tr>
<td>
<span class="term"><span class="emphasis"><em>Returns</em></span>&#160;:</span></td>
<td> Zero on success, nonzero on failure, i.e. when you passed zero
         as <i class="parameter"><tt>significant</tt></i>.  It sets analyser errno to ENCA_EINVALUE on
         failure.
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2884010"></a><h3>
<a name="enca-get-significant"></a>enca_get_significant ()</h3>
<a class="indexterm" name="id2884018"></a><pre class="programlisting">size_t      enca_get_significant            (EncaAnalyser analyser);</pre>
<p>
Returns the minimum number of significant characters required by <i class="parameter"><tt>analyser</tt></i>.
</p>
<p>
See <a href="libenca-Analyser.html#enca-set-significant"><tt class="function">enca_set_significant()</tt></a> for more detailed description of required
significant characters.</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td>
<span class="term"><i class="parameter"><tt>analyser</tt></i>&#160;:</span></td>
<td> An analyser.
</td>
</tr>
<tr>
<td>
<span class="term"><span class="emphasis"><em>Returns</em></span>&#160;:</span></td>
<td> The minimum number of significant characters.

</td>
</tr>
</tbody>
</table></div>
<p>Since  1.3.
</p>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2884085"></a><h3>
<a name="enca-set-threshold"></a>enca_set_threshold ()</h3>
<a class="indexterm" name="id2884093"></a><pre class="programlisting">int         enca_set_threshold              (EncaAnalyser analyser,
                                             double threshold);</pre>
<p>
Sets the minimal ratio between the most probable and the second most
probable charsets.
</p>
<p>
The default value of this option is 1.4142.
</p>
<p>
<a href="libenca-Analyser.html#enca-analyse"><tt class="function">enca_analyse()</tt></a> consideres the result known only when there's a clear gap
between the most probable and the second most probable charset
proababilities.  Lower <i class="parameter"><tt>threshold</tt></i> values mean larger probability of a
mistake and smaller probability of not recognizing a charset; higher
<i class="parameter"><tt>threshold</tt></i> values the contrary.  Threshold value of 2 is almost infinity.</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td>
<span class="term"><i class="parameter"><tt>analyser</tt></i>&#160;:</span></td>
<td> An analyser.
</td>
</tr>
<tr>
<td>
<span class="term"><i class="parameter"><tt>threshold</tt></i>&#160;:</span></td>
<td> Minimal ratio between winner and second best guess.
</td>
</tr>
<tr>
<td>
<span class="term"><span class="emphasis"><em>Returns</em></span>&#160;:</span></td>
<td> Zero on success, nonzero on failure, i.e. when you passed value
         smaller than 1.0 as <i class="parameter"><tt>threshold</tt></i>.  It sets analyser errno to
         ENCA_EINVALUE on failure.
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2884191"></a><h3>
<a name="enca-get-threshold"></a>enca_get_threshold ()</h3>
<a class="indexterm" name="id2884199"></a><pre class="programlisting">double      enca_get_threshold              (EncaAnalyser analyser);</pre>
<p>
Returns the threshold value used by <i class="parameter"><tt>analyser</tt></i>.
</p>
<p>
See <a href="libenca-Analyser.html#enca-set-threshold"><tt class="function">enca_set_threshold()</tt></a> for more detailed threshold description.</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td>
<span class="term"><i class="parameter"><tt>analyser</tt></i>&#160;:</span></td>
<td> An analyser.
</td>
</tr>
<tr>
<td>
<span class="term"><span class="emphasis"><em>Returns</em></span>&#160;:</span></td>
<td> The threshold value.

</td>
</tr>
</tbody>
</table></div>
<p>Since  1.3.
</p>
</div>
</div>
</div>
<table class="navigation" width="100%" summary="Navigation footer" cellpadding="2" cellspacing="0"><tr valign="middle">
<td align="left"><a accesskey="p" href="ch01.html"><b>&lt;&lt;&#160;Enca Library API</b></a></td>
<td align="right"><a accesskey="n" href="libenca-Typedefs-and-Constants.html"><b>Typedefs and Constants&#160;&gt;&gt;</b></a></td>
</tr></table>
</body>
</html>
